{"ast":null,"code":"import _regeneratorRuntime from\"/Users/apple/Downloads/React-verification-system/client/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/apple/Downloads/React-verification-system/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import axios from\"axios\";import{USER_SIGNIN_REQUEST,USER_SIGNIN_SUCCESS,USER_SIGNIN_FAIL,USER_SIGNOUT,USER_REGISTER_REQUEST,USER_REGISTER_SUCCESS,USER_REGISTER_FAIL,USER_HISTORY_REQUEST,USER_HISTORY_SUCCESS,USER_HISTORY_FAIL}from\"../constants/userConstants\";var signin=function signin(phone,password){return/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(dispatch){var _yield$axios$post,data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:dispatch({type:USER_SIGNIN_REQUEST,payload:{phone:phone,password:password}});_context.prev=1;_context.next=4;return axios.post(\"/api/login\",{phone:phone,password:password});case 4:_yield$axios$post=_context.sent;data=_yield$axios$post.data;dispatch({type:USER_SIGNIN_SUCCESS,payload:data});localStorage.setItem(\"userInfo\",JSON.stringify(data));_context.next=13;break;case 10:_context.prev=10;_context.t0=_context[\"catch\"](1);dispatch({type:USER_SIGNIN_FAIL,payload:_context.t0.response&&_context.t0.response.data.message?_context.t0.response.data.message:_context.t0.message});case 13:case\"end\":return _context.stop();}}},_callee,null,[[1,10]]);}));return function(_x){return _ref.apply(this,arguments);};}();};var logout=function logout(){return function(dispatch){localStorage.removeItem(\"userInfo\");dispatch({type:USER_SIGNOUT});};};var register=function register(firstName,lastName,phone,password){return/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(dispatch){var _yield$axios$post2,data;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:dispatch({type:USER_REGISTER_REQUEST,payload:{firstName:firstName,lastName:lastName,phone:phone,password:password}});_context2.prev=1;_context2.next=4;return axios.post(\"/api/register\",{firstName:firstName,lastName:lastName,phone:phone,password:password});case 4:_yield$axios$post2=_context2.sent;data=_yield$axios$post2.data;dispatch({type:USER_REGISTER_SUCCESS,payload:data});localStorage.setItem(\"userInfo\",JSON.stringify(data));_context2.next=13;break;case 10:_context2.prev=10;_context2.t0=_context2[\"catch\"](1);dispatch({type:USER_REGISTER_FAIL,payload:_context2.t0.response&&_context2.t0.response.data.message?_context2.t0.response.data.message:_context2.t0.message});case 13:case\"end\":return _context2.stop();}}},_callee2,null,[[1,10]]);}));return function(_x2){return _ref2.apply(this,arguments);};}();};var listHistoryMine=function listHistoryMine(){return/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(dispatch,getState){var _getState,userInfo,_yield$axios$get,data,message;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:dispatch({type:USER_HISTORY_REQUEST});_getState=getState(),userInfo=_getState.userSignin.userInfo;_context3.prev=2;_context3.next=5;return axios.get(\"/api/user/history\",{headers:{Authorization:\"Bearer \".concat(userInfo.token)}});case 5:_yield$axios$get=_context3.sent;data=_yield$axios$get.data;dispatch({type:USER_HISTORY_SUCCESS,payload:data});_context3.next=14;break;case 10:_context3.prev=10;_context3.t0=_context3[\"catch\"](2);message=_context3.t0.response&&_context3.t0.response.data.message?_context3.t0.response.data.message:_context3.t0.message;dispatch({type:USER_HISTORY_FAIL,payload:message});case 14:case\"end\":return _context3.stop();}}},_callee3,null,[[2,10]]);}));return function(_x3,_x4){return _ref3.apply(this,arguments);};}();};export{signin,register,logout,listHistoryMine};","map":{"version":3,"sources":["/Users/apple/Downloads/React-verification-system/client/src/actions/userActions.js"],"names":["axios","USER_SIGNIN_REQUEST","USER_SIGNIN_SUCCESS","USER_SIGNIN_FAIL","USER_SIGNOUT","USER_REGISTER_REQUEST","USER_REGISTER_SUCCESS","USER_REGISTER_FAIL","USER_HISTORY_REQUEST","USER_HISTORY_SUCCESS","USER_HISTORY_FAIL","signin","phone","password","dispatch","type","payload","post","data","localStorage","setItem","JSON","stringify","response","message","logout","removeItem","register","firstName","lastName","listHistoryMine","getState","userInfo","userSignin","get","headers","Authorization","token"],"mappings":"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","sourcesContent":["import axios from \"axios\";\r\nimport {\r\n  USER_SIGNIN_REQUEST,\r\n  USER_SIGNIN_SUCCESS,\r\n  USER_SIGNIN_FAIL,\r\n  USER_SIGNOUT,\r\n  USER_REGISTER_REQUEST,\r\n  USER_REGISTER_SUCCESS,\r\n  USER_REGISTER_FAIL,\r\n  USER_HISTORY_REQUEST,\r\n  USER_HISTORY_SUCCESS,\r\n  USER_HISTORY_FAIL,\r\n} from \"../constants/userConstants\";\r\n\r\nconst signin = (phone, password) => async (dispatch) => {\r\n  dispatch({ type: USER_SIGNIN_REQUEST, payload: { phone, password } });\r\n  try {\r\n    const { data } = await axios.post(\"/api/login\", { phone, password });\r\n    dispatch({ type: USER_SIGNIN_SUCCESS, payload: data });\r\n    localStorage.setItem(\"userInfo\", JSON.stringify(data));\r\n  } catch (error) {\r\n    dispatch({\r\n      type: USER_SIGNIN_FAIL,\r\n      payload:\r\n        error.response && error.response.data.message\r\n          ? error.response.data.message\r\n          : error.message,\r\n    });\r\n  }\r\n};\r\n\r\nconst logout = () => (dispatch) => {\r\n  localStorage.removeItem(\"userInfo\");\r\n  dispatch({ type: USER_SIGNOUT });\r\n};\r\n\r\nconst register = (firstName, lastName, phone, password) => async (dispatch) => {\r\n  dispatch({\r\n    type: USER_REGISTER_REQUEST,\r\n    payload: { firstName, lastName, phone, password },\r\n  });\r\n  try {\r\n    const { data } = await axios.post(\"/api/register\", {\r\n      firstName,\r\n      lastName,\r\n      phone,\r\n      password,\r\n    });\r\n    dispatch({ type: USER_REGISTER_SUCCESS, payload: data });\r\n    localStorage.setItem(\"userInfo\", JSON.stringify(data));\r\n  } catch (error) {\r\n    dispatch({\r\n      type: USER_REGISTER_FAIL,\r\n      payload:\r\n        error.response && error.response.data.message\r\n          ? error.response.data.message\r\n          : error.message,\r\n    });\r\n  }\r\n};\r\n\r\nconst listHistoryMine = () => async (dispatch, getState) => {\r\n  dispatch({ type: USER_HISTORY_REQUEST });\r\n  const {\r\n    userSignin: { userInfo },\r\n  } = getState();\r\n  try {\r\n    const { data } = await axios.get(\"/api/user/history\", {\r\n      headers: { Authorization: `Bearer ${userInfo.token}` },\r\n    });\r\n    dispatch({ type: USER_HISTORY_SUCCESS, payload: data });\r\n  } catch (error) {\r\n    const message =\r\n      error.response && error.response.data.message\r\n        ? error.response.data.message\r\n        : error.message;\r\n    dispatch({ type: USER_HISTORY_FAIL, payload: message });\r\n  }\r\n};\r\n\r\nexport { signin, register, logout, listHistoryMine };\r\n"]},"metadata":{},"sourceType":"module"}